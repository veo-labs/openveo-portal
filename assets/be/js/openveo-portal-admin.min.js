"use strict";!function(a){a.module("opa.i18n",[])}(angular),function(a){function b(a,b){return function(c,d,e){if(c){c=c.toUpperCase();var f=c.split("."),g=c,h=b;d=parseInt(d);for(var i=0;i<f.length;i++)h[f[i]]&&(h=h[f[i]]);if("object"==typeof h&&!isNaN(d)&&"SINGLE"in h&&"PLURAL"in h&&(h=d>1?h.PLURAL:h.SINGLE),g="string"==typeof h?h:c,e){var j=new RegExp(Object.keys(e).join("|"),"gi");g=g.replace(j,function(a){return e[a]})}return a.trustAsHtml(g)}return null}}a.filter("opaTranslate",b),b.$inject=["$sce","opaTranslations"]}(angular.module("opa.i18n")),function(a){var b=a.module("opa",["ngRoute","ngAnimate","ngMaterial","ngAria","ngCookies","ngMessages","opa.i18n","opa.locale"]);b.constant("opaWebServiceBasePath","/ws/"),b.config(["$routeProvider","$locationProvider","$logProvider","$httpProvider","$mdThemingProvider",function(a,b,c,d,e){a.when("/",{template:'<opa-dashboard flex layout="row"></opa-dashboard>',pageTitle:"DASHBOARD.PAGE_TITLE",title:"DASHBOARD.TITLE",pageInfo:"DASHBOARD.INFO"}).otherwise("/"),a.when("/promoted-videos",{template:'<opa-promoted-videos flex layout="row"></opa-promoted-videos>',pageTitle:"PROMOTED_VIDEOS.PAGE_TITLE",title:"PROMOTED_VIDEOS.TITLE",pageInfo:"PROMOTED_VIDEOS.INFO"}),a.when("/settings",{template:'<opa-settings flex layout="row"></opa-settings>',pageTitle:"SETTINGS.PAGE_TITLE",title:"SETTINGS.TITLE",pageInfo:"SETTINGS.INFO"}),b.html5Mode(!0),c.debugEnabled(!1),d.interceptors.push("opaInterceptor"),e.definePalette("opaBlue",{50:"f5f8ff",100:"e5eeff",200:"bde1f5",300:"7ec2e7",400:"58b3e4",500:"1a91d1",600:"1a8dcb",700:"1f7bad",800:"1a6c99",900:"155d84",A100:"80d2ff",A200:"52c2ff",A400:"1aafff",A700:"008bd6",contrastDefaultColor:"dark",contrastLightColors:["500","700","800","900"]}),e.definePalette("opaPink",{50:"fff5fe",100:"ffe5eb",200:"f5bddc",300:"e77eb8",400:"e458a5",500:"e6007e",600:"cb1a7c",700:"ad1f6d",800:"991a60",900:"841552",A100:"ff80c6",A200:"ff52b1",A400:"ff1a98",A700:"d60076",contrastDefaultColor:"dark",contrastLightColors:["500","600","700","800","900","A700"]}),e.theme("default").primaryPalette("opaBlue",{default:"500","hue-1":"300","hue-2":"800","hue-3":"A100"}),e.theme("default").accentPalette("opaPink",{default:"A200","hue-1":"A100","hue-2":"A400","hue-3":"A700"})}]),b.run(["$filter","opaInfoConfiguration","opaNotificationConfiguration",function(a,b,c){b.setOptions({closeLabel:a("opaTranslate")("INFO.CLOSE"),closeAriaLabel:a("opaTranslate")("INFO.CLOSE_ACCESSIBILITY")}),c.setOptions({closeLabel:a("opaTranslate")("NOTIFICATION.CLOSE"),closeAriaLabel:a("opaTranslate")("NOTIFICATION.CLOSE_ACCESSIBILITY")})}]),a.element(document).ready(function(){a.bootstrap(document,["opa"],{strictDi:!0})})}(angular),function(a){function b(){var a=this;return Object.defineProperties(this,{options:{value:{}},setOptions:{value:function(b){b.closeLabel&&(a.options.closeLabel=b.closeLabel),b.closeAriaLabel&&(a.options.closeAriaLabel=b.closeAriaLabel)}},getOptions:{value:function(){return a.options}}}),{getOptions:this.getOptions,setOptions:this.setOptions}}a.factory("opaNotificationConfiguration",b),b.$inject=[]}(angular.module("opa")),function(a){function b(a,b){function c(){return a.get(b+"version")}return{getInfo:c}}a.factory("opaAboutFactory",b),b.$inject=["$http","opaWebServiceBasePath"]}(angular.module("opa")),function(a){function b(){function a(a,b,c){var d,e,f,g={},h=[],i=a.match(/([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);if(!i)throw new TypeError(a+" is not a valid URL");e=i[1],f=i[2],d=i[3],f&&(h=f.split("&"),h.forEach(function(a){var b=a.split("=");g[b[0]]=b[1]})),g[b]=c,h=[];for(var j in g)h.push(j+"="+g[j]);return h.length&&(e+="?"+h.join("&")),d&&(e+="#"+d),e}return{setUrlParameter:a}}a.factory("opaUrlFactory",b),b.$inject=[]}(angular.module("opa")),function(a){function b(a){var b=this;Object.defineProperties(b,{$onInit:{value:function(){a.$emit("opaViewLoaded")}}})}a.controller("OpaDashboardController",b),b.$inject=["$scope"]}(angular.module("opa")),function(a){function b(a){var b=this;Object.defineProperties(b,{availablePlayers:{value:[{id:"wowza",name:"SETTINGS.LIVE.WOWZA"},{id:"youtube",name:"SETTINGS.LIVE.YOUTUBE"},{id:"vodalys",name:"SETTINGS.LIVE.VODALYS"}]},liveSwitchMessage:{value:null,writable:!0},urlErrorMessage:{value:null,writable:!0},settings:{value:{},writable:!0},$onChanges:{value:function(a){if(a.opaSettings&&a.opaSettings.currentValue){var c=angular.copy(a.opaSettings.currentValue);b.settings.activated=void 0!==c.activated&&c.activated,b.settings.playerType=c.playerType||b.availablePlayers[0].id,b.settings.url=c.url||null,b.settings.wowza=c.wowza||{},b.settings.wowza.playerLicenseKey=c.wowza&&c.wowza.playerLicenseKey||null,b.settings.private=void 0!==c.private&&c.private,b.settings.groups=c.groups||[],b.updateLiveSwitchMessage(b.settings.activated),b.updateUrlErrorMessage(b.settings.playerType),b.callUpdate()}}},$postLink:{value:function(){a.$emit("opaLiveSettingsLinked",{controller:b})}},callUpdate:{value:function(){b.isValid()&&b.opaOnUpdate&&b.opaOnUpdate({settings:b.settings})}},updateLiveSwitchMessage:{value:function(a){b.liveSwitchMessage=a?"SETTINGS.LIVE.ACTIVATED_LABEL":"SETTINGS.LIVE.DEACTIVATED_LABEL"}},updateUrlErrorMessage:{value:function(a){b.urlErrorMessage="SETTINGS.LIVE.URL_"+a.toUpperCase()+"_ERROR"}},isValid:{value:function(){return!a.opaLiveSettings||a.opaLiveSettings.$valid}}}),a.$watch("$ctrl.opaSettings",function(a,c){b.callUpdate()},!0)}a.controller("OpaLiveSettingsController",b),b.$inject=["$scope"]}(angular.module("opa")),function(a){function b(a,b,c){var d=this;Object.defineProperties(d,{isOpened:{value:!1,writable:!0},toggleActions:{value:function(){var c=a[0].querySelector(".opa-actions-wrapper");if(d.isOpened=!d.isOpened,d.isOpened){var e,f=a.find("ul")[0],g=b.getComputedStyle(f);e=parseFloat(g.getPropertyValue("height")||g.height),e||(e=f.offsetHeight),c.style.height=e+"px"}else c.style.height="0px"}},handleActionKeypress:{value:function(a,b){13===a.keyCode&&b.action(b)}}})}a.controller("OpaActionsButtonController",b),b.$inject=["$element","$window","$document"]}(angular.module("opa")),function(a){function b(){var a=this;return Object.defineProperties(this,{options:{value:{}},setOptions:{value:function(b){b.closeLabel&&(a.options.closeLabel=b.closeLabel),b.closeAriaLabel&&(a.options.closeAriaLabel=b.closeAriaLabel)}},getOptions:{value:function(){return a.options}}}),{getOptions:this.getOptions,setOptions:this.setOptions}}a.factory("opaInfoConfiguration",b),b.$inject=[]}(angular.module("opa")),function(a){function b(){}a.controller("OpaInfoButtonController",b),b.$inject=[]}(angular.module("opa")),function(a){function b(){var a=this;Object.defineProperties(a,{onClick:{value:function(){a.opaEdit()}},onRemove:{value:function(b){b.stopImmediatePropagation(),a.opaRemove()}}})}a.controller("OpaMediaContainerController",b)}(angular.module("opa")),function(a){function b(a){var b=this;Object.defineProperties(b,{isChecked:{value:!1,writable:!0},$onChanges:{value:function(c){c.hasOwnProperty("opaChecked")&&(b.isChecked=b.opaChecked),c.hasOwnProperty("opaFocus")&&b.opaFocus===!0&&a.find("md-checkbox")[0].focus()}},updateSelect:{value:function(){b.isChecked?b.selectCtrl.check(b.opaMedia):b.selectCtrl.uncheck(b.opaMedia)}},onBlur:{value:function(){b.opaBlur()}}})}a.controller("OpaMediaOptionController",b),b.$inject=["$element"]}(angular.module("opa")),function(a){function b(a){var b,c=this;Object.defineProperties(c,{selection:{value:[],writable:!0},multiple:{value:!1,writable:!0},checkboxesStates:{value:[],writable:!0},focusStates:{value:[],writable:!0},keepFocus:{value:!1,writable:!0},isInitialized:{value:!1,writable:!0},$onInit:{value:function(){c.multiple=c.opaMultiple||Array.isArray(c.ngModel),c.ngModel&&(c.selection=c.multiple?c.ngModel:[c.ngModel]),c.setCheckboxesStates(),c.isInitialized=!0}},$onChanges:{value:function(a){a.hasOwnProperty("opaMedias")&&c.isInitialized&&(c.setCheckboxesStates(),c.setFocusStates())}},check:{value:function(a){if(b=c.opaMedias.indexOf(a),c.multiple)c.selection.indexOf(a.id)===-1&&(c.selection.push(a.id),c.ngModel=c.selection,c.checkboxesStates[b]=!0);else{c.selection=[a.id],c.ngModel=a.id;for(var d=0;d<c.checkboxesStates.length;d++)c.checkboxesStates[d]=d===b}}},uncheck:{value:function(a){b=c.selection.indexOf(a.id),b!==-1&&c.selection.splice(b,1),b=c.opaMedias.indexOf(a),b!==-1&&(c.checkboxesStates[b]=!1),c.ngModel=c.multiple?c.selection:""}},setCheckboxesStates:{value:function(){c.checkboxesStates=[],c.opaMedias.forEach(function(a){c.checkboxesStates.push(c.selection.indexOf(a.id)!==-1)})}},setFocusStates:{value:function(){c.focusStates=[],c.opaMedias.forEach(function(a){c.focusStates.push(!1)})}},optionFocus:{value:function(b){if(KeyboardEvent.prototype.isPrototypeOf(b)&&c.focusStates.length)if(9===b.keyCode)c.keepFocus=!0,c.focusStates[0]=!0,a.children().addClass("opa-focused");else{var d,e=c.focusStates.indexOf(!0);if(e===-1)return;switch(b.keyCode){case 37:d=e-1;break;case 39:d=e+1;break;default:return}if(d>=c.focusStates.length?d=0:d<0&&(d=c.focusStates.length-1),d===e)return;c.keepFocus=!0,c.focusStates[e]=!1,c.focusStates[d]=!0}}},onBlur:{value:function(){if(c.keepFocus)c.keepFocus=!1;else{var b=c.focusStates.indexOf(!0);b!==-1&&(c.focusStates[b]=!1),a.children().removeClass("opa-focused")}}}})}a.controller("OpaMediaSelectController",b),b.$inject=["$element"]}(angular.module("opa")),function(a){function b(){var a=this;Object.defineProperties(a,{handleItemKeypress:{value:function(a,b){13===a.keyCode&&b.action(b)}}})}a.controller("OpaNavController",b),b.$inject=[]}(angular.module("opa")),function(a){function b(a,b){function c(){i.opaAvailableTags="undefined"==typeof i.opaAvailableTags?null:i.opaAvailableTags}function d(){if(!i.opaAvailableTags)return angular.copy(i.tags);var a=[];return i.tags.forEach(function(b){for(var c=0;c<i.opaAvailableTags.length;c++)if(i.opaAvailableTags[c].name===b){a.push(i.opaAvailableTags[c].value);break}}),a}function e(a){a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault()}var f,g,h,i=this,j=a.controller("ngModel"),k=a.controller("mdInputContainer"),l=-1,m=!1;Object.defineProperties(i,{tag:{value:"",writable:!0},tags:{value:[],writable:!0},autoCompleteValues:{value:[]},isAutoCompleteDisplayed:{value:!1,writable:!0},$onInit:{value:function(){c(),g=angular.element(a[0].querySelector(".ov-field-tags-auto-complete")),h=a.find("input"),h.on("focus",function(){i.isAutoCompleteDisplayed=!0})}},$postLink:{value:function(){f=angular.element(a.find("input")[0]).controller("ngModel"),f.$validators.opaTags=function(a,b){var c=!i.tags||0===i.tags.length;return!f.$touched||!m||!c}}},$onDestroy:{value:function(){h.off("focus"),h.off("blur"),g.off("keydown")}},$onChanges:{value:function(a){a.ngRequired&&(m=!!a.ngRequired.currentValue,k&&k.label&&k.label.toggleClass("md-required",m));var b=!i.tags||0===i.tags.length;k&&k.setInvalid(m&&b&&f&&f.$touched)}},autoComplete:{value:function(){i.opaAvailableTags&&(i.autoCompleteValues.splice(0,i.autoCompleteValues.length),i.tag&&i.opaAvailableTags.forEach(function(a){0===a.name.toLowerCase().indexOf(i.tag.toLowerCase())&&i.autoCompleteValues.push(a)}),i.autoCompleteValues.length?i.isAutoCompleteDisplayed=!0:(l=-1,g.off("keydown")))}},removeTag:{value:function(a,b){i.tags.splice(b,1),j.$setViewValue(d()),a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault(),j.$validate(),i.tags.length||h[0].focus()}},handleAutoCompleteKeys:{value:function(a,b){if(i.autoCompleteValues.length)if(40===a.keyCode||38===a.keyCode){var c=40===a.keyCode?1:-1;1===c&&l+1>=i.autoCompleteValues.length||c===-1&&l<=0?(l=-1,h[0].focus()):(l+=c,g[0].querySelectorAll("li")[l].focus()),e(a)}else 13===a.keyCode&&b&&(i.addTag(b),e(a))}},handleInputKeys:{value:function(a){13===a.keyCode?(i.addTag(i.tag),e(a)):9===a.keyCode?i.isAutoCompleteDisplayed=!1:i.autoCompleteValues.length&&(40===a.keyCode?(l=0,g[0].querySelector("li").focus()):38===a.keyCode&&(l=i.autoCompleteValues.length-1,g[0].querySelectorAll("li")[l].focus()),38!==a.keyCode&&40!==a.keyCode||(e(a),g.off("keydown"),g.on("keydown",i.handleAutoCompleteKeys)))}},addTag:{value:function(a){if(!i.opaAvailableTags&&a&&i.tags.indexOf(a)===-1)return i.tag="",i.tags.push(a),j.$setViewValue(d()),void j.$validate();if(i.opaAvailableTags)for(var b=0;b<i.opaAvailableTags.length;b++)if(i.opaAvailableTags[b].name===a){a&&i.tags.indexOf(i.opaAvailableTags[b].name)===-1&&(i.tags.push(a),j.$setViewValue(d()),j.$validate()),i.tag="",i.autoComplete(),h[0].focus();break}}},invalidateUntouched:{value:function(){var a=d(),b=!a||0===a.length;!f.$touched&&m&&b&&k.setInvalid(!0)}}}),j.$isEmpty=function(a){var b=!a||0===a.length;return k&&k.setInvalid(m&&b&&f&&f.$touched),b},j.$render=function(){i.opaAvailableTags?(i.tags=[],(j.$viewValue||[]).forEach(function(a){for(var b=0;b<i.opaAvailableTags.length;b++)if(i.opaAvailableTags[b].value===a){i.tags.push(i.opaAvailableTags[b].name);break}})):i.tags=angular.copy(j.$viewValue)||[]},b.$watch("$ctrl.opaAvailableTags",c)}a.controller("OpaTagsController",b),b.$inject=["$element","$scope"]}(angular.module("opa")),function(a){function b(a){var b=this;Object.defineProperties(b,{$mdMedia:{value:a}})}a.controller("OpaToolbarController",b),b.$inject=["$mdMedia"]}(angular.module("opa")),function(a){function b(a,b){function c(){return a.get(b+"groups")}return{getGroups:c}}a.factory("opaGroupsFactory",b),b.$inject=["$http","opaWebServiceBasePath"]}(angular.module("opa")),function(a){function b(){function a(){return openVeoPortalSettings.languages}return{getLanguages:a}}a.factory("opaI18nFactory",b),b.$inject=[]}(angular.module("opa")),function(a){function b(){return{restrict:"A",scope:{message:"<opaInfo",closeLabel:"@opaClose",closeAriaLabel:"@opaCloseAria"},controller:"OpaInfoController",controllerAs:"ctrl",bindToController:!0}}a.directive("opaInfo",b)}(angular.module("opa")),function(a){function b(a,b,c){var d=function(a){var c;return a.data&&a.data.error&&(c=a.data.error.code),403===a.status?b("opaTranslate")("ERRORS.FORBIDDEN"):400===a.status?b("opaTranslate")("ERRORS.CLIENT"):c?b("opaTranslate")("ERRORS.SERVER")+" (code="+c+")":b("opaTranslate")("ERRORS.SERVER")};return{request:function(a){return a.url&&!/^.*\.html$/.test(a.url)&&(a.url="/be/"+a.url.replace(/^\/(.*)/,"$1")),a},responseError:function(b){return 401===b.status?a.$broadcast("opaHttpError",{authenticationError:!0}):b.status===-1?b.config&&b.config.timeout&&b.config.timeout.status||a.$broadcast("opaHttpError",{message:d(b)}):a.$broadcast("opaHttpError",{message:d(b)}),c.reject(b)}}}a.factory("opaInterceptor",b),b.$inject=["$rootScope","$filter","$q"]}(angular.module("opa")),function(a){function b(a){var b=this,c=a.controller("ngModel");Object.defineProperties(this,{isValid:{value:function(a){return/^([a-zA-Z0-9]{5}-)*[a-zA-Z0-9]{5}$/.test(a)}},$onChanges:{value:function(){c.$validate()}}}),c.$validators.opaLicenseKey=function(a,c){return!a||(!b.opaLicenseKeyValidator||b.isValid(a))}}a.controller("OpaLicenseKeyValidatorController",b),b.$inject=["$element"]}(angular.module("opa")),function(a){function b(){return{restrict:"A",require:["^ngModel"],controller:"OpaLicenseKeyValidatorController",controllerAs:"ctrl",bindToController:!0,scope:{opaLicenseKeyValidator:"<"}}}a.directive("opaLicenseKeyValidator",b)}(angular.module("opa")),function(a){function b(a,b,c,d){var e=this;Object.defineProperties(e,{value:{value:null,writable:!0},multiple:{value:null,writable:!0},$onInit:{value:function(){e.value=c,e.multiple=d}},dialogSizeClass:{value:function(){return b("xs")?"opa-dialog-100":b("sm")?"opa-dialog-80":b("md")?"opa-dialog-55":b("gt-md")?"opa-dialog-40":void 0}},cancel:{value:function(){a.cancel()}},close:{value:function(){a.hide({value:e.value})}}})}a.controller("OpaMediaLibraryDialogController",b),b.$inject=["$mdDialog","$mdMedia","value","multiple"]}(angular.module("opa")),function(a){function b(a,b){var c=this;Object.defineProperties(c,{$mdMedia:{value:b},hide:{value:function(){a.hide()}}})}a.controller("OpaNotificationController",b),b.$inject=["$mdToast","$mdMedia"]}(angular.module("opa")),function(a){function b(a,b){function c(c){return a.get(b+"settings/"+c)}function d(c,d){return a.post(b+"settings/"+c,{value:d})}return{getSetting:c,updateSetting:d}}a.factory("opaSettingsFactory",b),b.$inject=["$http","opaWebServiceBasePath"]}(angular.module("opa")),function(a){function b(a){var b=this,c=a.controller("ngModel");Object.defineProperties(this,{isValidYoutubeStreamUrl:{value:function(a){return/^https:\/\/www\.youtube\.com\/watch\?v=[&=\w-]+$/.test(a)}},isValidWowzaStreamUrl:{value:function(a){return/^https?:\/\/[\w-.]*(:[0-9]+)?\/[\w-._]+\/[\w-._]+\/playlist.m3u8$/.test(a)}},isValidVodalysStreamUrl:{value:function(a){return/^https?:\/\/console\.vodalys\.studio\/[^#?=]+$/.test(a)}},$onChanges:{value:function(){c.$validate()}}}),c.$validators.opaStreamUrl=function(a,c){return!a||(!b.opaStreamUrlValidator||("youtube"===b.opaType?b.isValidYoutubeStreamUrl(a):"wowza"===b.opaType?b.isValidWowzaStreamUrl(a):"vodalys"===b.opaType?b.isValidVodalysStreamUrl(a):void 0))}}a.controller("OpaStreamUrlValidatorController",b),b.$inject=["$element"]}(angular.module("opa")),function(a){function b(){return{restrict:"A",require:["^ngModel"],controller:"OpaStreamUrlValidatorController",controllerAs:"ctrl",bindToController:!0,scope:{opaStreamUrlValidator:"<",opaType:"<"}}}a.directive("opaStreamUrlValidator",b)}(angular.module("opa")),function(a){function b(a,b,c){function d(){return openVeoPortalSettings.user}function e(){return!!openVeoPortalSettings.user}function f(){return a.post(c+"logout")}function g(){return i}function h(a){i=a,b.put("language",i)}var i=(b.get("language")||navigator.language||navigator.browserLanguage).split("-")[0];return{getUserInfo:d,isAuthenticated:e,logout:f,getLanguage:g,setLanguage:h}}a.factory("opaUserFactory",b),b.$inject=["$http","$cookies","opaWebServiceBasePath"]}(angular.module("opa")),function(a){function b(a,b){function c(c){return a.get(b+"videos/"+c)}function d(){return a.get(b+"videos/promoted")}return{getVideo:c,getPromotedVideos:d}}a.factory("opaVideosFactory",b),b.$inject=["$http","opaWebServiceBasePath"]}(angular.module("opa")),function(a){function b(a,b){function c(b,c,e,f){b&&(c=Math.max(c,0)||0,a.show(a.build({hideDelay:c,templateUrl:"opa-notification.html",controller:"OpaNotificationController",controllerAs:"ctrl",bindToController:!0,locals:{message:b,closeButton:0===c,closeLabel:e||d.closeLabel,closeAriaLabel:f||d.closeAriaLabel}})))}var d=b.getOptions();return{displayNotification:c}}a.factory("opaNotificationFactory",b),b.$inject=["$mdToast","opaNotificationConfiguration"]}(angular.module("opa")),function(a){function b(a,b,c,d,e,f,g,h){var i=this;Object.defineProperties(i,{isError:{value:!1,writable:!0},isSaving:{value:!1,writable:!0},promotedVideos:{value:null,writable:!0},containers:{value:[],writable:!0},containersClass:{value:"",writable:!0},$onInit:{value:function(){f.getPromotedVideos().then(function(b){i.promotedVideos=b.data&&b.data||new Array(9);for(var c=0;c<i.promotedVideos.length;c++){var d=0===c?"publish-16by9-300":"publish-16by9-142";i.promotedVideos[c]&&(i.promotedVideos[c].preview=h.setUrlParameter(i.promotedVideos[c].thumbnail,"style",d)),i.containers[c]={title:c+1,style:d,media:i.promotedVideos[c]}}a.$emit("opaViewLoaded")},function(b){i.isError=!0,a.$emit("opaViewLoaded")})}},getContainersTemplate:{value:function(){var a;return d("xs")?(i.containersClass="opa-xs",a="opa-promotedVideos-containers-2And4Cols.html"):d("sm")?(i.containersClass="opa-sm",a="opa-promotedVideos-containers-3Cols.html"):(i.containersClass="opa-gt-sm",a="opa-promotedVideos-containers-2And4Cols.html"),a}},openMediaLibraryDialog:{value:function(a){var b=i.containers[a];c.show({controller:"OpaMediaLibraryDialogController",controllerAs:"$ctrl",templateUrl:"opa-mediaLibraryDialog.html",locals:{value:b.media?b.media.id:void 0,multiple:!1}}).then(function(a){var c=a.value;return c?void f.getVideo(c).then(function(a){b.media=a.data.entity,b.media.preview=h.setUrlParameter(a.data.entity.thumbnail,"style",b.style)}):void(b.media=void 0)},function(){})}},clearContainer:{value:function(a){i.containers[a].media=void 0}},save:{value:function(){i.isSaving=!0;for(var a=new Array(9),c=0;c<a.length;c++)a[c]=i.containers[c].media&&i.containers[c].media.id||void 0;e.updateSetting("promoted-videos",a).then(function(){i.isSaving=!1,g.displayNotification(b("opaTranslate")("PROMOTED_VIDEOS.SAVE_SUCCESS"),1e3)},function(a){i.isSaving=!1})}}})}a.controller("OpaPromotedVideosController",b),b.$inject=["$scope","$filter","$mdDialog","$mdMedia","opaSettingsFactory","opaVideosFactory","opaNotificationFactory","opaUrlFactory"]}(angular.module("opa")),function(a){function b(a,b,c,d,e,f,g){var h,i=this,j=d.controller&&d.controller("mdContent");Object.defineProperties(i,{isError:{value:!1,writable:!0},availableGroups:{value:[]},liveSettings:{value:null,writable:!0},$onInit:{value:function(){b.all([e.getSetting("live"),f.getGroups()]).then(function(b){var c=b[1].data&&b[1].data.entities;i.liveSettings=b[0].data&&b[0].data.entity&&b[0].data.entity.value||{},c&&c.forEach(function(a){i.availableGroups.push({name:a.name,value:a.id})}),a.$emit("opaViewLoaded")},function(b){i.isError=!0,a.$emit("opaViewLoaded")}),a.$on("opaLiveSettingsLinked",function(a,b){h=b.controller}),j&&j.$element.addClass("opa-settings-wrapper")}},save:{value:function(){i.isSaving=!0,e.updateSetting("live",i.liveSettings).then(function(){i.isSaving=!1,g.displayNotification(c("opaTranslate")("SETTINGS.SAVE_SUCCESS"),1e3)},function(a){i.isSaving=!1})}},updateLiveSettings:{value:function(a){a&&i.liveSettings&&(i.liveSettings.activated=a.activated,i.liveSettings.playerType=a.playerType,i.liveSettings.url=a.url,i.liveSettings.private=a.private,i.liveSettings.groups=a.groups,i.liveSettings.wowza=a.wowza)}},isValid:{value:function(){return!!h&&h.isValid()}}})}a.controller("OpaSettingsController",b),b.$inject=["$scope","$q","$filter","$element","opaSettingsFactory","opaGroupsFactory","opaNotificationFactory"]}(angular.module("opa")),function(a){function b(a,b,c,d,e,f,g,h,i,j){var k=this,l=e("opaTranslate");Object.defineProperties(k,{page:{value:{}},adminTitle:{value:"HEADER.TITLE"},$mdMedia:{value:f},menuLinks:{value:[]},toolbarLeftActions:{value:[]},toolbarRightActions:{value:[]},advancedToolbarRightActions:{value:[]},advancedToolbarLanguageActions:{value:[]},toolbarPageInfo:{value:{type:"info",message:null,accessibility:l("HEADER.INFO_ACCESSIBILITY"),help:l("HEADER.INFO_TOOLTIP")}},navMenu:{value:[]},advancedNavMenu:{value:[]},userLanguage:{value:h.getLanguage()||i.getLanguages()[0]},isViewLoaded:{value:!1,writable:!0},init:{value:function(){var a=[],b={label:l("NAV.DASHBOARD"),icon:"dashboard",action:k.goTo,href:"/"},c={label:l("NAV.SETTINGS"),icon:"settings",action:k.goTo,href:"/settings"},d={label:l("NAV.PROMOTED_VIDEOS"),icon:"view_quilt",action:k.goTo,href:"/promoted-videos"};i.getLanguages().forEach(function(b){k.advancedToolbarLanguageActions.push({label:l("HEADER.LANGUAGES."+b),accessibility:l("HEADER.LANGUAGES."+b+"_ACCESSIBILITY"),code:b,action:k.setLanguage,selected:b===k.userLanguage}),a.push({label:l("NAV.LANGUAGES."+b),code:b,action:k.setLanguage,selected:b===k.userLanguage})}),k.toolbarLeftActions.push({type:"icon",accessibility:l("HEADER.TOGGLE_MENU_ACCESSIBILITY"),help:l("HEADER.TOGGLE_MENU_TOOLTIP"),icon:"menu",action:k.toggleSideNavigation}),k.toolbarRightActions.push(k.toolbarPageInfo),k.advancedToolbarRightActions.push({type:"icon",accessibility:l("HEADER.VIEW_PORTAL_ACCESSIBILITY"),help:l("HEADER.VIEW_PORTAL_TOOLTIP"),icon:"visibility",action:k.goToPortal},{type:"list",accessibility:l("HEADER.TOGGLE_LANGUAGES_ACCESSIBILITY"),help:l("HEADER.TOGGLE_LANGUAGES_TOOLTIP"),icon:"language",menu:k.advancedToolbarLanguageActions},{type:"list",accessibility:l("HEADER.TOGGLE_USER_ACTIONS_ACCESSIBILITY"),help:l("HEADER.TOGGLE_USER_ACTIONS_TOOLTIP"),icon:"account_circle",menu:[{label:l("HEADER.USER_ACTIONS.DISCONNECT"),accessibility:l("HEADER.USER_ACTIONS.DISCONNECT_ACCESSIBILITY"),action:k.logout}]}),k.navMenu.push(b,d,c),k.advancedNavMenu.push(b,d,c,{divider:!0},{label:l("NAV.VIEW_PORTAL"),icon:"visibility",action:k.goToPortal},{label:l("NAV.LANGUAGE"),icon:"language",actions:a},{divider:!0},{label:l("NAV.LOGOUT"),icon:"power_settings_new",action:k.logout})}},logout:{value:function(){h.logout().then(function(){k.goToPortal()})}},goTo:{value:function(a){d.path(a.href),k.closeSideNavigation()}},goToPortal:{value:function(){c.location.href="/"}},setLanguage:{value:function(a){h.setLanguage(a.code),c.location.href="/be"+d.path()}},closeSideNavigation:{value:function(){g("opa").close()}},toggleSideNavigation:{value:function(){g("opa").toggle()}},selectMenuItem:{value:function(a){var b=function(b){b.href===a?b.selected=!0:b.selected=!1};k.navMenu.forEach(b),k.advancedNavMenu.forEach(b)}}}),a.$on("$routeChangeStart",function(a,b){k.isViewLoaded=!1,h.isAuthenticated()||k.goToPortal()}),a.$on("$routeChangeSuccess",function(a,b){k.page.title=b&&b.title,k.page.pageTitle=b&&b.pageTitle,k.toolbarPageInfo.message=b&&b.pageInfo?l(b.pageInfo):null,k.selectMenuItem(b.originalPath)}),a.$on("opaViewLoaded",function(){k.isViewLoaded=!0}),a.$on("opaHttpError",function(a,b){b&&b.authenticationError?k.logout():j.displayNotification(b.message,0)}),k.init()}a.controller("OpaIndexController",b),b.$inject=["$scope","$route","$window","$location","$filter","$mdMedia","$mdSidenav","opaUserFactory","opaI18nFactory","opaNotificationFactory"]}(angular.module("opa")),function(a){a.component("opaPromotedVideos",{templateUrl:"opa-promotedVideos.html",controller:"OpaPromotedVideosController",bindings:{}})}(angular.module("opa")),function(a){a.component("opaSettings",{templateUrl:"opa-settings.html",controller:"OpaSettingsController",require:["?^mdContent"],bindings:{}})}(angular.module("opa")),function(a){function b(a,b){var c=this;Object.defineProperties(c,{information:{value:{},writable:!0},message:{value:"",writable:!0},isLoaded:{value:!1,writable:!0},$onInit:{value:function(){b.getInfo().then(function(b){c.isLoaded=!0,c.information=b.data,c.message=a("opaTranslate")(c.information.updateAvailable?"DASHBOARD.ABOUT.NEED_UPGRADE_DESCRIPTION":"DASHBOARD.ABOUT.UP_TO_DATE_DESCRIPTION",0,{"%version%":c.information.version,"%versionUrl%":c.information.versionReleaseUrl,"%latestVersion%":c.information.latestVersion,"%latestVersionUrl%":c.information.latestVersionReleaseUrl})},function(a){c.isLoaded=!0})}}})}a.controller("OpaAboutController",b),b.$inject=["$filter","opaAboutFactory"]}(angular.module("opa")),function(a){a.component("opaAbout",{templateUrl:"opa-about.html",controller:"OpaAboutController",bindings:{}})}(angular.module("opa")),function(a){function b(a,b,c,d){var e=this;Object.defineProperties(e,{medias:{value:[],writable:!0},keyword:{value:null,writable:!0},sortField:{value:"date",writable:!0},sortDirection:{value:"desc",writable:!0},triggered:{value:!1,writable:!0},limit:{value:null,writable:!0},currentPage:{value:null,writable:!0},totalPages:{value:null,writable:!0},isLoading:{value:!1,writable:!0},$onInit:{value:function(){e.limit=e.opaResultsPerPage||25,e.init();var b=a.find("opa-media-select"),c=b.parent();c.on("scroll",function(){var a=this.scrollTop/(this.scrollHeight-this.clientHeight);a<.7?e.triggered=!1:a>.8&&e.triggered===!1&&(e.triggered=!0,e.addNextPage())})}},init:{value:function(){e.keyword=null,e.search()}},search:{value:function(){e.currentPage=null,e.totalPages=null,e.fetch(function(a){e.currentPage=1,e.totalPages=a.data.pagination.pages,e.medias=a.data.entities})}},addNextPage:{value:function(){e.currentPage!==e.totalPages&&e.fetch(function(a){e.currentPage++,e.medias=e.medias.concat(a.data.entities)})}},fetch:{value:function(a){if(!e.isLoading){e.isLoading=!0;var f={filter:{sortBy:e.sortField,sortOrder:e.sortDirection,include:["id","title","date","thumbnail"]},pagination:{limit:e.limit}};e.keyword&&(f.filter.query=e.keyword),e.currentPage&&(f.pagination.page=e.currentPage),b.post(c+"videos",f).then(function(b){return e.isLoading=!1,e.triggered=!1,b.data.entities.forEach(function(a){a.preview=d.setUrlParameter(a.thumbnail,"style","publish-square-142")}),a(b)},function(a){e.isLoading=!1})}}}})}a.controller("OpaMediaLibraryController",b),b.$inject=["$element","$http","opaWebServiceBasePath","opaUrlFactory"]}(angular.module("opa")),function(a){a.component("opaMediaLibrary",{templateUrl:"opa-mediaLibrary.html",controller:"OpaMediaLibraryController",bindings:{opaMultiple:"<",opaResultsPerPage:"<",ngModel:"="}})}(angular.module("opa")),function(a){a.component("opaDashboard",{templateUrl:"opa-dashboard.html",controller:"OpaDashboardController",bindings:{}})}(angular.module("opa")),function(a){a.component("opaLiveSettings",{templateUrl:"opa-liveSettings.html",controller:"OpaLiveSettingsController",bindings:{opaSettings:"<",opaGroups:"<",opaOnUpdate:"&"}})}(angular.module("opa")),function(a){a.component("opaActionsButton",{templateUrl:"opa-actionsButton.html",controller:"OpaActionsButtonController",bindings:{opaLabel:"@",opaIcon:"@",opaActions:"<"}})}(angular.module("opa")),function(a){function b(a,b,c,d,e,f){var g=this,h=null,i=null,j=e.newPanelPosition(),k=f.getOptions();Object.defineProperties(g,{open:{value:function(){h||i||(i=e.open({templateUrl:"opa-info.html",controller:function(){this.close=g.close},controllerAs:"ctrl",locals:{message:g.message,closeLabel:g.closeLabel,closeAriaLabel:g.closeAriaLabel},attachTo:c[0].body,escapeToClose:!0,clickOutsideToClose:!0,position:j,onCloseSuccess:function(){h=null,b[0].focus()}}).then(function(a){i=null,h=a,d(function(){c[0].querySelector(".opa-info button").focus()},1)}))}},close:{value:function(){h&&h.close()}},$onInit:{value:function(){j.relativeTo(b).addPanelPosition(e.xPosition.ALIGN_START,e.yPosition.BELOW)}},$onChanges:{value:function(a){a.closeLabel&&(g.closeLabel=a.closeLabel.currentValue||k.closeLabel),a.closeAriaLabel&&(g.closeAriaLabel=a.closeAriaLabel.currentValue||k.closeAriaLabel)}}}),b.on("click",g.open),a.$on("$destroy",function(){g.close(),b.off("click",g.open)})}a.controller("OpaInfoController",b),b.$inject=["$scope","$element","$document","$timeout","$mdPanel","opaInfoConfiguration"]}(angular.module("opa")),function(a){a.component("opaInfoButton",{templateUrl:"opa-infoButton.html",controller:"OpaInfoButtonController",bindings:{opaMessage:"<",opaAccessibility:"@",opaHelp:"@"}})}(angular.module("opa")),function(a){a.component("opaMediaContainer",{templateUrl:"opa-mediaContainer.html",controller:"OpaMediaContainerController",controllerAs:"ctrl",bindings:{opaTitle:"@",opaMedia:"<",opaEdit:"&",opaRemove:"&"}})}(angular.module("opa")),function(a){a.component("opaMediaOption",{templateUrl:"opa-mediaOption.html",controller:"OpaMediaOptionController",controllerAs:"ctrl",require:{selectCtrl:"^opaMediaSelect"},bindings:{opaChecked:"<",opaMedia:"<",opaFocus:"<",opaBlur:"&"}})}(angular.module("opa")),function(a){a.component("opaMediaSelect",{templateUrl:"opa-mediaSelect.html",controller:"OpaMediaSelectController",bindings:{ngModel:"=",opaMedias:"<",opaMultiple:"<"}})}(angular.module("opa")),function(a){a.component("opaNav",{templateUrl:"opa-nav.html",controller:"OpaNavController",bindings:{opaMenu:"<"}})}(angular.module("opa")),function(a){a.component("opaTags",{templateUrl:"opa-tags.html",controller:"OpaTagsController",require:["?ngModel","^?mdInputContainer"],bindings:{opaAvailableTags:"<",ngRequired:"<"}})}(angular.module("opa")),function(a){a.component("opaToolbar",{templateUrl:"opa-toolbar.html",controller:"OpaToolbarController",bindings:{opaTitle:"@",opaLeftActions:"<",opaRightActions:"<"}})}(angular.module("opa"));
//# sourceMappingURL=openveo-portal-admin.min.js.map