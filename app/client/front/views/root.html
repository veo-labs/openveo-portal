<!DOCTYPE html>
<html ng-app="ov.portal" ng-controller="MainController" ng-strict-di>
  <head>
    <title ng-bind="title | translate"></title>
    <base href="/">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    {{=[[ ]]=}}

    [[#css]]
    <link rel="stylesheet" type="text/css" href="[[.]]">
    [[/css]]

    <script>
      var languages = [ [[& languages]] ];
      var ovPlayerDirectory = "/lib/openveo-player/";
    </script>
  </head>

  <body ng-cloak>
    <header ng-if="!isIframe">
      <div class="container">
        <div layout="row" layout-align="space-between center" layout-padding>
          <div>logo</div>
          [[#user]]
          <div layout="row" layout-align="end center">
            <label><span ng-bind="'UI.HELLO'|translate"></span> [[user]]</label>
            <md-button hide-xs class='md-raised md-primary text-button'
                       href="/logout" target="_self"
                       aria-label="{{'UI.LOGOUT'|translate}}"
                       ng-bind="'UI.LOGOUT'|translate"
                       analytics-on='click' analytics-event="Logout"
                       ></md-button>
          </div>
          [[/user]]
          [[^user]]
          <md-button hide-xs class='md-raised md-primary text-button' 
                     href="/authenticate" target="_self" 
                     aria-label="{{'UI.LOGIN'|translate}}"
                     ng-bind="'UI.LOGIN'|translate"
                     analytics-on='click' analytics-event="Login"
                     ></md-button>
          [[/user]]
        </div>
      </div>

      <div layout="column" layout-fill>
        <md-toolbar  md-scroll-shrink hide-xs >
          <div class="md-toolbar-tools">
            <div class='container'>
              <md-button ng-href="/" 
                         aria-label="{{'MENU.HOME'|translate}}"
                         ng-bind="'MENU.HOME'|translate"></md-button>
              <md-button ng-href="/search"
                         aria-label="{{'MENU.ALL_VIDEOS'|translate}}"
                         ng-bind="'MENU.ALL_VIDEOS'|translate"></md-button>
              <span flex></span>
            </div>
          </div>
        </md-toolbar>
        <md-toolbar  hide-gt-xs>
          <div class="md-toolbar-tools">
            <md-menu>
            <!-- Trigger element is a md-button with an icon -->
              <md-button ng-click="$mdOpenMenu($event)" class="md-icon-button">
                <md-icon material-icons md-light md-48>menu</md-icon>
              </md-button>
              <md-menu-content width="12">
                <md-menu-item><md-button ng-href="/"
                                        aria-label="{{'MENU.HOME'|translate}}"
                                        ng-bind="'MENU.HOME'|translate"></md-button></md-menu-item>
                <md-menu-item><md-button ng-href="/search"
                                        aria-label="{{'MENU.ALL_VIDEOS'|translate}}"
                                        ng-bind="'MENU.ALL_VIDEOS'|translate"></md-button></md-menu-item>
              </md-menu-content>
            </md-menu>
            <span flex></span>
            <md-button 
              aria-label="{{'UI.LOGIN'|translate}}"
              ng-bind="'UI.LOGIN'|translate"></md-button>
          </div>
        </md-toolbar>
      </div>
    </header>
    <div layout="column" class="zero">
      <div class="container">
        <div ng-view ng-cloak></div>
      </div>
    </div>
    <footer ng-if="!isIframe" class="footer">
        <md-toolbar>
          <div class="md-toolbar-tools">
            <div class='container'>
              <div layout="row" layout-align="center center">
                <md-button class="md-primary" 
                           ng-href="{{contactMailTo}}" target="_blank" 
                           aria-label="{{'LINKS.CONTACT'|translate}}"
                           ng-bind="'LINKS.CONTACT'|translate"
                           analytics-on='click' analytics-event="Contact"
                           ></md-button> |
                <md-button class="md-primary" 
                           ng-href="{{helpUrl}}" target="_blank" 
                           aria-label="{{'LINKS.HELP'|translate}}"
                           ng-bind="'LINKS.HELP'|translate"
                           analytics-on='click' analytics-event="Help"
                           ></md-button>
              </div>
            </div>
          </div>
        </md-toolbar>
    </footer>

    [[#librariesScripts]]
    <script type="text/javascript" src="[[.]]"></script>
    [[/librariesScripts]]

    <script>
      var languageCode = navigator.language || navigator.browserLanguage;
      languageCode = languages.indexOf(languageCode) > -1 ? languageCode : languages[0];
      document.write('\x3Cscript type="text/javascript" src="/lib/angular-i18n/angular-locale_' + languageCode + '.js">\x3C/script>');
      document.write('\x3Cscript type="text/javascript" src="/themes/[[theme]]/i18n/openveo-portal-locale_' + languageCode + '.js">\x3C/script>');
      document.write('\x3Cscript type="text/javascript" src="/themes/[[theme]]/conf.js">\x3C/script>');
      videojs.options.flash.swf = "/lib/openveo-player/lib/video.js/dist/video-js.swf";
    </script>
   
    [[#scripts]]
    <script type="text/javascript" src="[[.]]"></script>
    [[/scripts]]

    [[{analytics}]]
  </body>
  [[={{ }}=]]
</html>
